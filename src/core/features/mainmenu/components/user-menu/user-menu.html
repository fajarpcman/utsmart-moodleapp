<ion-header>
    <ion-toolbar>
        <ion-title>
            <h2>
                {{'core.user.useraccount' | translate}}
            </h2>
        </ion-title>
        <ion-buttons slot="end">
            <ion-button fill="clear" (click)="close($event)" [attr.aria-label]="'core.close' | translate">
                <ion-icon name="fas-times" slot="icon-only" aria-hidden="true"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content>
    <core-loading [hideUntil]="siteLogoLoaded && handlersLoaded">
        <ion-list>
            <ion-item button class="core-usermenu-siteinfo ion-text-wrap" *ngIf="siteInfo" lines="full" detail="false" [href]="siteUrl"
                core-link auto-login="yes">
                <ion-label>
                    <!-- Show site logo. -->
                    <img class="core-usermenu-site-logo" *ngIf="siteLogo && siteLogoLoaded" [src]="siteLogo" role="presentation" alt=""
                        onError="this.class='image-not-found'">
                    <p class="core-usermenu-sitename">
                        <ion-text>
                            {{siteName}}
                        </ion-text>
                    </p>
                </ion-label>
            </ion-item>
            <ion-item button class="core-usermenu-handler ion-text-wrap" *ngIf="siteInfo" lines="full" (click)="openUserProfile($event)"
                detail="true" [attr.aria-label]="'core.user.profile' | translate">
                <core-user-avatar [user]="siteInfo" [userId]="siteInfo.userid" [linkProfile]="false" slot="start"></core-user-avatar>
                <ion-label>
                    <h2 color="white">{{ siteInfo.fullname }}</h2>
                </ion-label>
            </ion-item>

            <ion-item class="ion-text-center" *ngIf="(!handlers || !handlers.length) && !handlersLoaded">
                <ion-label>
                    <ion-spinner [attr.aria-label]="'core.loading' | translate"></ion-spinner>
                </ion-label>
            </ion-item>

            <ion-item button (click)="openPreferences($event)" [attr.aria-label]="'core.settings.preferences' | translate" detail="true"
                class="core-user-menu-preferences">
                <ion-icon name="fas-wrench" slot="start" aria-hidden="true"></ion-icon>
                <ion-label>
                    <p class="item-heading">{{ 'core.settings.preferences' | translate }}</p>
                </ion-label>
            </ion-item>
        </ion-list>
    </core-loading>
</ion-content>
<ion-footer>
    <div class="ion-padding">
        <ion-button (click)="logout($event)" expand="block" color="danger" [attr.aria-label]="'core.mainmenu.logout' | translate"
            class="ion-text-wrap">
            <ng-container *ngIf="!removeAccountOnLogout">
                <ion-icon name="fas-sign-out-alt" slot="start" aria-hidden="true"></ion-icon>
                {{ 'core.mainmenu.logout' | translate }}
            </ng-container>
            <ng-container *ngIf="removeAccountOnLogout">
                <ion-icon name="fas-trash" slot="start" aria-hidden="true"></ion-icon>
                {{ 'core.login.removeaccount' | translate }}
            </ng-container>
        </ion-button>
    </div>
</ion-footer>
